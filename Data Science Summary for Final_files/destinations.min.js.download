/* GoogleTagManagerJS */
(function(){
  // GoogleTagManagerJS Bundle
  var pushToDataLayer = true;

  function onReady(a,b,c){b=document,c='addEventListener'; b[c] ? b[c]('DOMContentLoaded',a) : window.attachEvent('onload',a)}

  var triggerPushToDataLayer = function() {
    window.dataLayer = window.dataLayer || [];

    
  }

  if (document.readyState === "complete"
    || document.readyState === "loaded"
    || document.readyState === "interactive") {
    triggerPushToDataLayer();
  } else {
    onReady(triggerPushToDataLayer);
  }

}());

(function(){
  function segmentGa(){
    return window.analytics &&
      typeof window.analytics.ready === 'function' &&
      window.analytics.Integrations &&
      typeof window.analytics.Integrations['Google Analytics'] === 'function';
  }

  var existingGa = window[window['GoogleAnalyticsObject'] || 'ga'];
  if (typeof existingGa != 'function' && !(segmentGa())){
    (function(){
      var w = window,
          d = document,
          s = 'script',
          g = 'https://www.google-analytics.com/analytics.js',
          o = 'ga',
          e = d.createElement(s),
          f = d.getElementsByTagName(s)[0];
      e.async=1;
      e.src=g;
      w['GoogleAnalyticsObject'] = o;
      w[o] = w[o] || function(){
        (w[o].q=w[o].q||[]).push(arguments)
      },
      w[o].l = 1 * new Date();
      f.parentNode.insertBefore(e,f);
    })();
  }

  function onReady(a,b,c){b=document,c='addEventListener'; b[c] ? b[c]('DOMContentLoaded',a) : window.attachEvent('onload',a)}

  var properties = [{"id":"UA-92003007-1","name":"redis","mapping":{"dimension15":"unknown","dimension16":"unknown","dimension17":"unknown"}}];

  function trackClearbitMappings() {
    var ga = window[window['GoogleAnalyticsObject'] || 'ga'];

    properties.forEach(function(property) {
      var trackerName = property.name + '_Clearbit';

      ga('create', property.id, 'auto', trackerName);

      for (var key in property.mapping) {
        if (key && property.mapping[key]) {
          ga(trackerName + '.set', key, property.mapping[key]);
        }
      }

      ga(trackerName+'.send',
        'event',
        'Clearbit',
        'Enriched',
        'Clearbit Enriched',
        { nonInteraction: true }
      );
    });
  }

  var applyToAnalytics = function() {
    var tryApply = function() {
      var ga = window[window['GoogleAnalyticsObject'] || 'ga'];
      return typeof ga === 'function';
    }
    if (tryApply()) {
      // Native support
      trackClearbitMappings();
    } else if (segmentGa()) {
      // Segment support
      analytics.ready(tryApply);
      analytics.ready(function(){
        trackClearbitMappings();
      });
    } else {
      console.error("Clearbit error: 'ga' variable not found.");
    }
  }

  if (document.readyState === "complete"
  || document.readyState === "loaded"
  || document.readyState === "interactive") {
    applyToAnalytics();
  } else {
    onReady(applyToAnalytics);
  }
}());